/**
 * Donation Modal Module - Minified Version
 * Include this single file to use the donation modal
 * 
 * Usage:
 * <script src="donation-modal.min.js"></script>
 * <script>
 *   const donationModal = new DonationModal({
 *     ethAddress: 'your-eth-address',
 *     btcAddress: 'your-btc-address',
 *     buyMeCoffeeUrl: 'https://buymeacoffee.com/yourname'
 *   });
 *   donationModal.init();
 * </script>
 */

// Inject CSS
(function() {
  const style = document.createElement('style');
  style.textContent = `.donation-modal{display:none!important;position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4);backdrop-filter:blur(3px);animation:fadeIn .3s ease;--bg-container:#fff;--color-text:#000;--color-muted:#999;--color-accent:#f26d5b;--color-accent-hover:#d95b4b;--bg-primary:#f5f5f5;--border-color:#e0e0e0;--color-text-secondary:#666;--highlight-bg:#f0f0f0;--box-shadow:0 4px 6px rgba(0,0,0,.1)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.donation-content{background-color:var(--bg-container);color:var(--color-text);margin:15% auto;padding:20px;border-radius:12px;box-shadow:var(--box-shadow);width:90%;max-width:500px;position:relative;animation:slideUp .3s ease}@media (max-width:480px){.donation-content{margin:10% auto;padding:15px;width:95%}}@keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.donation-close{position:absolute;right:15px;top:10px;color:var(--color-muted);font-size:28px;font-weight:700;cursor:pointer;transition:color .2s ease}.donation-close:hover{color:var(--color-accent)}.donation-methods{display:flex;flex-direction:column;gap:15px;margin-top:15px}.donation-method{background:var(--bg-primary);padding:12px;border-radius:8px;display:flex;flex-direction:column;gap:5px}.donation-separator{display:flex;align-items:center;justify-content:center;position:relative;margin:5px 0}.donation-separator::after,.donation-separator::before{content:"";flex-grow:1;height:1px;background:var(--border-color);margin:0 10px}.donation-separator span{color:var(--color-text-secondary);font-size:14px;padding:0 10px;opacity:.8}.donation-method p{margin:0;font-size:13px;font-weight:700;color:var(--color-text-secondary)}.crypto-address-container p{margin:0 0 2px 0}.crypto-donation{display:flex;align-items:flex-start;gap:15px;flex-wrap:wrap}@media (max-width:600px){.crypto-donation{flex-direction:column;align-items:center}.crypto-info{height:auto;width:100%;margin-bottom:10px}.eth-qr{align-self:center;margin:5px auto 10px;width:140px;height:140px}}.crypto-info{flex:1;min-width:200px;display:flex;flex-direction:column;justify-content:space-between;gap:15px;height:120px}.crypto-address-container{display:flex;flex-direction:column;gap:5px}.eth-qr{width:120px;height:120px;background:#fff;border-radius:8px;padding:5px;box-shadow:0 2px 5px rgba(0,0,0,.1);display:flex;align-items:center;justify-content:center}.fallback-qr{display:flex;align-items:center;justify-content:center;height:100%;width:100%;color:var(--color-muted);font-size:12px;text-align:center}.eth-qr img{max-width:100%;max-height:100%}.donation-address{padding:8px;background:var(--bg-container);border-radius:6px;font-size:11px;overflow:hidden;white-space:nowrap;max-width:100%;line-height:1.2;position:relative;cursor:pointer;transition:background-color .2s ease,transform .2s ease;display:flex;align-items:center;margin-bottom:3px;min-width:0}.donation-address:hover{background:var(--highlight-bg)}.donation-address.copied{background:var(--color-accent);color:#fff;animation:pulse .5s ease}.address-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.copy-indicator{opacity:0;position:absolute;right:8px;font-size:10px;background:rgba(0,0,0,.1);padding:2px 4px;border-radius:4px;transition:opacity .2s ease}.donation-address:hover .copy-indicator{opacity:.7}.donation-address.copied .copy-indicator{opacity:1;background:rgba(255,255,255,.2)}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1.05)}}.bmc-link{display:inline-block;padding:10px 15px;background:var(--color-accent);color:#fff;text-decoration:none;border-radius:6px;font-weight:700;text-align:center;transition:background .2s ease,transform .2s ease}.bmc-link:hover{background:var(--color-accent-hover);transform:translateY(-2px)}@media (prefers-color-scheme:dark){.donation-modal{--bg-container:#1a1a1a;--color-text:#fff;--color-muted:#666;--color-accent:#f26d5b;--color-accent-hover:#ff7d6b;--bg-primary:#2a2a2a;--border-color:#333;--color-text-secondary:#999;--highlight-bg:#333;--box-shadow:0 4px 6px rgba(0,0,0,.3)}}`;
  document.head.appendChild(style);
})();

// Include the main JavaScript
!function(t){"use strict";const e={ethAddress:"",btcAddress:"",buyMeCoffeeUrl:"",buyMeButtonText:"☕️ Buy Me a Coffee",modalTitle:"Simply always free & Ad free.",modalDescription:"This app will always be free and clean—just a tool to make your life easier. If you want to support that kinda internet, buy me a coffee 🙏",qrCodeOptions:{width:110,margin:1,color:{dark:"#000",light:"#FFF"},errorCorrectionLevel:"H"}};t.DonationModal=class{constructor(t){this.config=Object.assign({},e,t),this.modal=null,this.isInitialized=!1,this.qrCodeLibrary=null}init(){if(this.isInitialized)return void console.warn("DonationModal already initialized");if(!this.config.ethAddress&&!this.config.btcAddress&&!this.config.buyMeCoffeeUrl)return void console.error("DonationModal: At least one donation method must be configured");this.config.ethAddress&&"undefined"==typeof QRCode&&this.loadQRCodeLibrary(),this.createModal(),this.attachEventListeners(),this.isInitialized=!0}loadQRCodeLibrary(){const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js",t.onload=()=>{this.qrCodeLibrary=window.QRCode,this.generateQRCode()},document.head.appendChild(t)}createModal(){if(document.getElementById("donation-modal"))return this.modal=document.getElementById("donation-modal"),void this.updateModalContent();const t=`\n        <div id="donation-modal" class="donation-modal" style="display: none !important;">\n          <div class="donation-content">\n            <span class="donation-close">&times;</span>\n            <h3>${this.config.modalTitle}</h3>\n            <p>${this.config.modalDescription}</p>\n            <div class="donation-methods">\n              ${this.createCryptoSection()}\n              ${this.createSeparator()}\n              ${this.createBuyMeCoffeeSection()}\n            </div>\n          </div>\n        </div>\n      `;document.body.insertAdjacentHTML("beforeend",t),this.modal=document.getElementById("donation-modal"),this.updateAddresses()}createCryptoSection(){return this.config.ethAddress||this.config.btcAddress?`\n        <div class="donation-method">\n          <div class="crypto-donation">\n            <div class="crypto-info">\n              ${this.config.ethAddress?`\n                <div class="crypto-address-container">\n                  <p>Ethereum / EVM chains:</p>\n                  <div id="eth-address" class="donation-address" title="Click to copy">\n                    <span class="address-text">${this.config.ethAddress}</span>\n                    <span class="copy-indicator">Click to copy</span>\n                  </div>\n                </div>\n              `:""}\n              ${this.config.btcAddress?`\n                <div class="crypto-address-container">\n                  <p>Bitcoin:</p>\n                  <div id="btc-address" class="donation-address" title="Click to copy">\n                    <span class="address-text">${this.config.btcAddress}</span>\n                    <span class="copy-indicator">Click to copy</span>\n                  </div>\n                </div>\n              `:""}\n            </div>\n            ${this.config.ethAddress?'<div id="eth-qr-code" class="eth-qr"></div>':""}\n          </div>\n        </div>\n      `:""}createSeparator(){return this.config.ethAddress||this.config.btcAddress?this.config.buyMeCoffeeUrl?'<div class="donation-separator"><span>or</span></div>':"":""}createBuyMeCoffeeSection(){return this.config.buyMeCoffeeUrl?`\n        <div class="donation-method">\n          <a id="bmc-link" href="${this.config.buyMeCoffeeUrl}" target="_blank" rel="noopener noreferrer" class="bmc-link">\n            ${this.config.buyMeButtonText}\n          </a>\n        </div>\n      `:""}updateModalContent(){const t=this.modal.querySelector("h3"),e=this.modal.querySelector("p");t&&(t.textContent=this.config.modalTitle),e&&(e.textContent=this.config.modalDescription),this.updateAddresses()}updateAddresses(){if(this.config.ethAddress){const t=document.getElementById("eth-address");if(t){const e=t.querySelector(".address-text");e&&(e.textContent=this.config.ethAddress)}}if(this.config.btcAddress){const t=document.getElementById("btc-address");if(t){const e=t.querySelector(".address-text");e&&(e.textContent=this.config.btcAddress)}}if(this.config.buyMeCoffeeUrl){const t=document.getElementById("bmc-link");t&&(t.href=this.config.buyMeCoffeeUrl,t.textContent=this.config.buyMeButtonText)}(this.qrCodeLibrary||"undefined"!=typeof QRCode)&&this.generateQRCode()}generateQRCode(){const t=document.getElementById("eth-qr-code");if(!t||!this.config.ethAddress)return;const e=this.qrCodeLibrary||window.QRCode;if(!e)return void console.log("QRCode library not loaded yet");try{t.innerHTML="";const i=this.config.ethAddress,o=document.createElement("img");o.alt="Ethereum QR Code",o.style.width="100%",o.style.height="100%",t.appendChild(o),e.toDataURL(i,this.config.qrCodeOptions,(function(e,i){e?(console.error("Error generating QR code:",e),t.innerHTML='<div class="fallback-qr">QR code unavailable</div>'):o.src=i}))}catch(e){console.error("Failed to generate QR code:",e),t.innerHTML='<div class="fallback-qr">QR code unavailable</div>'}}attachEventListeners(){const t=this.modal.querySelector(".donation-close");t&&t.addEventListener("click",(()=>this.close())),window.addEventListener("click",(t=>{t.target===this.modal&&this.close()}));if(this.config.ethAddress){const t=document.getElementById("eth-address");t&&this.setupCopyAddress(t,this.config.ethAddress)}if(this.config.btcAddress){const t=document.getElementById("btc-address");t&&this.setupCopyAddress(t,this.config.btcAddress)}}setupCopyAddress(t,e){t.addEventListener("click",(()=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then((()=>this.showCopySuccess(t))).catch((i=>{console.error("Failed to copy:",i),this.fallbackCopy(t,e)})):this.fallbackCopy(t,e)})),t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.click())})),t.setAttribute("tabindex","0")}fallbackCopy(t,e){try{const i=document.createElement("input");i.setAttribute("value",e),document.body.appendChild(i),i.select();document.execCommand("copy")?this.showCopySuccess(t):alert("Please copy this address manually: "+e),document.body.removeChild(i)}catch(t){console.error("Fallback copy failed:",t),alert("Please copy this address manually: "+e)}}showCopySuccess(t){const e=t.querySelector(".copy-indicator");e&&(e.textContent="Copied! ✓"),t.classList.add("copied"),setTimeout((()=>{t.classList.remove("copied"),e&&(e.textContent="Click to copy")}),2e3)}open(){this.modal?(this.modal.style.cssText="display: block !important",document.body.style.overflow="hidden",this.modal.dispatchEvent(new CustomEvent("donationModalOpened"))):console.error("DonationModal not initialized")}close(){this.modal&&(this.modal.style.cssText="display: none !important",document.body.style.overflow="",this.modal.dispatchEvent(new CustomEvent("donationModalClosed")))}destroy(){this.modal&&this.modal.remove(),this.modal=null,this.isInitialized=!1}attachToTrigger(t){t?t.addEventListener("click",(t=>{t.preventDefault(),this.open()})):console.error("Trigger element not provided")}}}(window);