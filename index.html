<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETH Validator Duties Tracker - Monitor Ethereum Validator Duties</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="ETH Duties Tracker helps Ethereum validators monitor upcoming duties including block proposals, attestations, and sync committee participation with real-time notifications.">
    <meta name="keywords" content="ethereum validator duties, eth validator tracker, validator duty notifications, block proposal tracker, attestation monitoring, sync committee tracker, ethereum staking dashboard, validator monitoring tool, eth duties notifications, telegram validator alerts">
    <meta name="author" content="Shayan Bagheri">
    <link rel="canonical" href="https://ethduties.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ethduties.com">
    <meta property="og:title" content="ETH Validator Duties Tracker">
    <meta property="og:description" content="Monitor your Ethereum validator duties with real-time notifications for block proposals, attestations, and sync committee participation.">
    <meta property="og:image" content="https://ethduties.com/assets/ethduties-logo.png">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://ethduties.com">
    <meta name="twitter:title" content="ETH Validator Duties Tracker">
    <meta name="twitter:description" content="Monitor your Ethereum validator duties with real-time notifications for block proposals, attestations, and sync committee participation.">
    <meta name="twitter:image" content="https://ethduties.com/assets/ethduties-logo.png">
    <meta name="twitter:creator" content="@sbetamc">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/ethduties-logo.png">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0HTVPPV4CD"></script>
    <script>
        // Check for Do Not Track preference
        var dnt = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
        var doNotTrack = dnt == "1" || dnt == "yes";
        
        if (!doNotTrack) {
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-0HTVPPV4CD', {
                anonymize_ip: true,
                cookie_flags: 'SameSite=None;Secure'
            });
        }
    </script>
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <img src="assets/ethduties-logo.png" alt="ETH Duties Logo" class="header-logo">
                <div class="header-text">
                    <h1>Ethereum Validator Duties Tracker</h1>
                    <p class="subtitle">Track current & upcoming duties for your validators</p>
                </div>
            </div>
        </header>
        
        <nav class="main-nav">
            <div class="nav-left">
                <button class="nav-btn active" data-page="duties">My Duties</button>
                <button class="nav-btn" data-page="network">Network Overview</button>
                <button class="nav-btn" data-page="settings">Settings</button>
                <button class="nav-btn" data-page="faq">FAQ</button>
            </div>
            <div class="nav-right">
                <div class="dark-mode-toggle">
                    <button id="darkModeToggle" class="dark-mode-btn" title="Toggle Dark Mode">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="sun-icon">
                            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z"/>
                        </svg>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="moon-icon hidden">
                            <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>

        <!-- My Duties Page -->
        <div id="dutiesPage" class="page active">
            <section class="validators-section">
                <h2>Add Validators</h2>
                <div class="add-validator-form">
                    <div class="form-content">
                        <div class="input-group">
                            <label for="validatorInput">Validator Public Key, Index, or Comma-Separated List:</label>
                            <div class="input-row">
                                <input type="text" id="validatorInput" placeholder="0x... or validator index (e.g., 1234,5678,9012)">
                                <button id="addValidatorBtn" class="btn-add">‚ûï Add Validator</button>
                            </div>
                        </div>
                        <div class="batch-operations">
                            <button id="importBtn" class="btn-secondary" title="Import validators from JSON file">
                                üì• Import
                            </button>
                            <button id="exportBtn" class="btn-secondary" title="Export all validators to JSON">
                                üì§ Export
                            </button>
                        </div>
                    </div>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                </div>

                <div class="validators-list">
                    <h3>Tracked Validators</h3>
                    <p style="font-size: 0.85rem; color: var(--text-secondary); margin: -5px 0 10px 0;">
                        üí° Tip: Click on pubkeys or double-click on indices to set custom labels
                    </p>
                    <ul id="validatorsList"></ul>
                </div>
            </section>

            <section class="duties-section">
                <h2>Upcoming Duties</h2>
                <div id="epochInfo" style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;"></div>
                <div class="controls">
                    <button id="fetchDutiesBtn" class="btn-primary">Fetch Duties</button>
                    <button id="clearCacheBtn" class="btn-secondary">Clear Cache</button>
                    <div class="auto-refresh">
                        <label>
                            <input type="checkbox" id="autoRefresh">
                            Auto-refresh every 30 seconds
                        </label>
                    </div>
                    <div id="loadingIndicator" class="loading-inline hidden">
                        <span class="spinner"></span>
                        <span class="loading-text">Loading...</span>
                    </div>
                    <div id="statusMessage" class="status-message hidden"></div>
                </div>

                <div class="duties-display">
                    <div id="errorMessage" class="error-message hidden"></div>
                    <div class="duties-tabs">
                        <button class="tab-btn active" data-tab="proposer">Proposer Duties</button>
                        <button class="tab-btn" data-tab="attester">Attester Duties</button>
                        <button class="tab-btn" data-tab="sync">Sync Committee</button>
                    </div>

                    <div class="duties-content">
                        <div id="proposerDuties" class="duty-panel active"></div>
                        <div id="attesterDuties" class="duty-panel"></div>
                        <div id="syncDuties" class="duty-panel"></div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Network Overview Page -->
        <div id="networkPage" class="page">
            <section class="network-section">
                <h2>Network Overview</h2>
                <div class="controls">
                    <button id="fetchNetworkBtn" class="btn-primary">Refresh Network Data</button>
                </div>
                <div id="networkLoadingIndicator" class="loading-inline hidden" style="margin-top: 15px;">
                    <span class="spinner"></span>
                    <span class="loading-text">Loading network data...</span>
                </div>
                <div id="networkContent"></div>
            </section>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="page">
            <section class="beacon-config">
                <h2>Beacon Node Configuration</h2>
                <div class="config-form">
                    <div class="form-group">
                        <label for="beaconUrl">Beacon Node URL:</label>
                        <input type="text" id="beaconUrl" placeholder="http://localhost:5052">
                    </div>
                    <div class="form-group">
                        <label for="publicBeaconSelect">Or select a public beacon node:</label>
                        <select id="publicBeaconSelect">
                            <option value="">-- Select Public Node --</option>
                        </select>
                        <small>Note: Public nodes may have rate limits</small>
                    </div>
                </div>
            </section>

            <section class="notifications-section">
            <h2>Notifications</h2>
            <div class="notification-grid-2x2">
                <!-- Top Row: Platform Setup -->
                <div class="grid-cell telegram-setup">
                    <h3>Telegram Notifications</h3>
                    <div class="form-group">
                        <label for="telegramChatId">Telegram Chat ID:</label>
                        <input type="text" id="telegramChatId" placeholder="Enter your chat ID">
                        <small>Start a chat with <a href="https://t.me/EthDuties_bot" target="_blank">@EthDuties_bot</a> and send /start to get your chat ID</small>
                    </div>
                    <button id="enableTelegramNotifications" class="btn-primary">Enable Telegram</button>
                    <button id="updateTelegramSubscription" class="btn-secondary" style="display: none;">Update Subscription</button>
                    <p class="notification-status" id="telegramNotificationStatus"></p>
                </div>
                
                <div class="grid-cell desktop-setup">
                    <h3>Desktop Notifications</h3>
                    <div class="platform-controls">
                        <button id="enableBrowserNotifications" class="btn-primary">Enable Desktop</button>
                        <button id="testBrowserNotification" class="btn-secondary" style="display: none;">Test Notification</button>
                    </div>
                    <div class="desktop-options">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="desktopSound" checked>
                                Play sound with notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="desktopPersistent" checked>
                                Keep notifications on screen until dismissed
                            </label>
                        </div>
                    </div>
                    <p class="notification-status" id="browserNotificationStatus"></p>
                </div>
                
                <!-- Bottom Row: Duty Settings -->
                <div class="grid-cell telegram-duties">
                    <h3>Telegram Duty Settings</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyProposerTelegram" checked>
                            Notify for proposer duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyAttesterTelegram" checked>
                            Notify for attester duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifySyncTelegram" checked>
                            Notify for sync committee duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="disabled-option">
                            <input type="checkbox" id="notifyMissedTelegram" disabled>
                            Notify for missed attestations (Coming Soon)
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="notifyMinutesTelegram">Notify when duty is within:</label>
                        <select id="notifyMinutesTelegram">
                            <option value="5">5 minutes</option>
                            <option value="10" selected>10 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid-cell desktop-duties">
                    <h3>Desktop Duty Settings</h3>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyProposer" checked>
                            Notify for proposer duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifyAttester" checked>
                            Notify for attester duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="notifySync" checked>
                            Notify for sync committee duties
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="disabled-option">
                            <input type="checkbox" id="notifyMissed" disabled>
                            Notify for missed attestations (Coming Soon)
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="notifyMinutes">Notify when duty is within:</label>
                        <select id="notifyMinutes">
                            <option value="5">5 minutes</option>
                            <option value="10" selected>10 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="data-management-section">
            <h2>Data Management</h2>
            <div class="data-controls">
                <p>All your data is stored locally in your browser. You can clear all stored data including validators, settings, and preferences.</p>
                <button id="clearAllDataBtn" class="btn-danger">Clear All Data</button>
            </div>
        </section>
        </div>
        
        <!-- FAQ Page -->
        <div id="faqPage" class="page">
            <section class="faq-section">
                <h2>Frequently Asked Questions</h2>
                
                <div class="faq-item">
                    <h3>What is ETH Duties Tracker?</h3>
                    <p>ETH Duties Tracker is a web application that helps Ethereum validators monitor their upcoming duties including block proposals, attestations, and sync committee participation. It provides real-time notifications and a dashboard view of all validator activities.</p>
                </div>
                
                <div class="faq-item">
                    <h3>How do I add my validators?</h3>
                    <p>You can add validators by entering either their validator index (e.g., 123456) or public key (0x...) in the "Add Validators" section. You can also add multiple validators at once by separating them with commas, or import them from a JSON file.</p>
                </div>
                
                <div class="faq-item">
                    <h3>What types of duties are tracked?</h3>
                    <p>The tracker monitors three types of validator duties:</p>
                    <ul>
                        <li><strong>Proposer Duties:</strong> When your validator is selected to propose a block</li>
                        <li><strong>Attester Duties:</strong> Regular attestation duties that happen every epoch</li>
                        <li><strong>Sync Committee:</strong> Special duties when your validator is part of the sync committee</li>
                    </ul>
                </div>
                
                <div class="faq-item">
                    <h3>How do notifications work?</h3>
                    <p>ETH Duties Tracker supports two types of notifications:</p>
                    <ul>
                        <li><strong>Desktop Notifications:</strong> Browser-based notifications that appear on your desktop when duties are approaching</li>
                        <li><strong>Telegram Notifications:</strong> Get alerts sent directly to your Telegram messenger</li>
                    </ul>
                    <p>You can configure when to receive notifications (5 minutes to 1 hour before duties) and which types of duties to be notified about.</p>
                </div>
                
                <div class="faq-item">
                    <h3>How do I set up Telegram notifications?</h3>
                    <p>1. Start a chat with <a href="https://t.me/EthDuties_bot" target="_blank">@EthDuties_bot</a><br>
                       2. Send /start to get your chat ID<br>
                       3. Enter your chat ID in the Settings page<br>
                       4. Click "Enable Telegram Notifications"</p>
                </div>
                
                <div class="faq-item">
                    <h3>What is Dashboard Mode?</h3>
                    <p>Dashboard Mode provides a full-screen, real-time view of your validators, upcoming duties, network status, and recent blocks. It's perfect for displaying on a dedicated monitor or TV screen. Access it by clicking the "Dashboard Mode" button at the bottom of the page.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Can I use a public beacon node?</h3>
                    <p>Yes! The app comes with several public beacon nodes pre-configured. You can select one from the dropdown in Settings, or enter your own beacon node URL if you're running a local node. Note that public nodes may have rate limits.</p>
                </div>
                
                <div class="faq-item">
                    <h3>How do I customize validator labels?</h3>
                    <p>Click on any validator's public key (the shortened address like "0x1234...abcd") to edit its label. You can give your validators meaningful names like "Main Validator" or "Node 1" to easily identify them.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Is my data stored securely?</h3>
                    <p>All data is stored locally in your browser's local storage. No validator information is sent to external servers except for the beacon node queries and optional notification services. Your data persists between browser sessions until you manually clear it.</p>
                </div>
                
                <div class="faq-item">
                    <h3>What do the duty countdown colors mean?</h3>
                    <p>The countdown timers use colors to indicate urgency:</p>
                    <ul>
                        <li><span style="color: #ef4444;">Red:</span> Less than 1 minute (critical)</li>
                        <li><span style="color: #f59e0b;">Orange:</span> 1-5 minutes (urgent)</li>
                        <li><span style="color: #3b82f6;">Blue:</span> More than 5 minutes (normal)</li>
                    </ul>
                </div>
                
                <div class="faq-item">
                    <h3>Can I export/import my validator list?</h3>
                    <p>Yes! Use the Export button to save your validator list as a JSON file, and Import to load validators from a previously exported file. This is useful for backing up your configuration or sharing it between devices.</p>
                </div>
                
                <div class="faq-item">
                    <h3>Need more help?</h3>
                    <p>For bug reports, feature requests, or contributions, visit the <a href="https://github.com/shayanb/ethduties" target="_blank">GitHub repository</a>. You can also reach out on Twitter <a href="https://x.com/sbetamc" target="_blank">@sbetamc</a>.</p>
                </div>
            </section>
        </div>

        <!-- Dashboard Mode Page -->
        <div id="dashboardPage" class="page dashboard-mode">
            <div class="dashboard-header">
                <div class="dashboard-header-content">
                    <img src="assets/ethduties-logo.png" alt="ETH Duties Logo" class="dashboard-logo">
                    <h1 class="dashboard-title">ETH Duties Tracker</h1>
                </div>
                <div id="dashboardLoadingIndicator" class="dashboard-loading-indicator-top">
                    <div class="loading-circle"></div>
                </div>
                <button id="dashboardExitBtn" class="dashboard-exit-btn" title="Exit Dashboard Mode (ESC)">‚úï</button>
            </div>
            <div class="dashboard-container">
                <!-- Left Column: Validators -->
                <div class="dashboard-left">
                    <div class="dashboard-section">
                        <h3 class="section-title">üë• My Validators</h3>
                        <div id="dashboardValidators" class="dashboard-validators"></div>
                    </div>
                </div>

                <!-- Middle Column: Duties -->
                <div class="dashboard-middle">
                    <div class="duties-grid">
                        <div class="dashboard-section">
                            <h3 class="section-title">üí∞ Proposer Duties</h3>
                            <div id="dashboardProposer" class="dashboard-duties-spaced"></div>
                        </div>
                        <div class="dashboard-section">
                            <h3 class="section-title">üìù Attester Duties</h3>
                            <div id="dashboardAttester" class="dashboard-duties-spaced"></div>
                        </div>
                        <div class="dashboard-section">
                            <h3 class="section-title">üíé Sync Committee</h3>
                            <div id="dashboardSync" class="dashboard-duties-spaced"></div>
                        </div>
                    </div>
                    <div class="dashboard-section past-duties-section">
                        <h3 class="section-title">üïí Recent Past Duties</h3>
                        <div id="dashboardPastDuties" class="dashboard-past-duties-spaced"></div>
                    </div>
                </div>

                <!-- Right Column: Network State -->
                <div class="dashboard-right">
                    <div class="dashboard-section">
                        <h3 class="section-title">üåê Network State</h3>
                        <div id="dashboardNetwork" class="dashboard-network">
                            <div class="network-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Slot</span>
                                    <span id="currentSlotNumber" class="stat-value">---</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Block</span>
                                    <span id="currentBlockNumber" class="stat-value">---</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Epoch</span>
                                    <span id="currentEpochNumber" class="stat-value">---</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Gas</span>
                                    <span id="currentGasPrice" class="stat-value">---</span>
                                </div>
                            </div>
                            <div class="block-stream">
                                <div class="stream-header">Block Stream</div>
                                <div id="blockStream" class="block-items-flow"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-content">
                <div class="footer-info">
                    <div class="footer-row">
                        <p>
                            Data is stored locally in your browser
                        </p>
                    </div>
                    <div class="footer-row footer-social">
                        <div class="social-item">
                            <a href="https://x.com/sbetamc" target="_blank" title="Twitter" class="social-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                                </svg>
                                <span>sbetamc</span>
                            </a>
                        </div>
                        <div class="social-item">
                            <a href="https://github.com/shayanb" target="_blank" title="GitHub Profile" class="social-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/>
                                </svg>
                                <span>shayanb</span>
                            </a>
                        </div>
                    </div>
                    <div class="footer-row footer-version-row">
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">
                            Inspired by <a href="https://github.com/TobiWo/eth-duties" target="_blank">eth-duties</a> | 
                        </span>
                        <a href="https://github.com/shayanb/ethduties" target="_blank" class="footer-version">v1.2.7</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <button id="dashboardModeToggle" class="dashboard-toggle">
                    üìä Dashboard Mode
                </button>
            </div>
        </footer>
    </div>

    <!-- Sync Committee Members Modal -->
    <div id="syncCommitteeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Sync Committee Members</h2>
                <button class="modal-close" onclick="app.closeSyncCommitteeModal()">&times;</button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Members will be populated here -->
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="analytics.js"></script>
    <script src="app.js"></script>
</body>
</html>